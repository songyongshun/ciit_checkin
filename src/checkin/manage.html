<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>管理配置</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .form-group { margin: 15px 0; }
    label { display: block; margin-bottom: 5px; }
    input, textarea { width: 100%; padding: 8px; }
    button { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; margin-right: 10px; }
    .btn-delete { background: #f44336; }
    .btn-list { background: #2196F3; }
    .btn-qrcode { background: #9C27B0; }
    .classroom-list { margin-top: 20px; padding: 15px; background: #f9f9f9; border-radius: 5px; }
    .classroom-item { padding: 8px; border-bottom: 1px solid #eee; }
    .classroom-item:last-child { border-bottom: none; }
    .class-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      margin: 5px 0;
      background-color: #f5f5f5;
      border-radius: 4px;
    }
    .delete-btn {
      background-color: #f44336;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
    }
    .delete-btn:hover {
      background-color: #d32f2f;
    }
  </style>
</head>
<body>
  <h2>动态配置教室</h2>
  
  <!-- 添加教室表单 -->
  <form method="POST" action="/checkin/manage/add">
    <div class="form-group">
      <label>教室ID:</label>
      <input name="classroom_id" value="0001" required>
    </div>
    <div class="form-group">
      <label>行数 (row):</label>
      <input type="number" name="row" value="4" min="1" required>
    </div>
    <div class="form-group">
      <label>列数 (column):</label>
      <input type="number" name="column" value="12" min="1" required>
    </div>
    <button type="submit">添加教室</button>
  </form>

  <!-- 列出所有教室 -->
  <form method="GET" action="/checkin/manage/list" style="margin-top: 20px;">
    <button type="submit" class="btn-list">列出所有教室</button>
  </form>

  <!-- 删除教室表单 -->
  <form method="POST" action="/checkin/manage/delete" style="margin-top: 20px;">
    <div class="form-group">
      <label>要删除的教室ID:</label>
      <input name="classroom_id" placeholder="输入教室ID" required>
    </div>
    <button type="submit" class="btn-delete" 
            onclick="return confirm('确定要删除该教室吗？')">删除教室</button>
  </form>

  <!-- 生成二维码表单 -->
  <form method="POST" action="/checkin/manage/generate-qrcode" style="margin-top: 20px;">
    <div class="form-group">
      <label>生成二维码的教室ID:</label>
      <input name="classroom_id" placeholder="输入教室ID" required>
    </div>
    <button type="submit" class="btn-qrcode">生成二维码</button>
  </form>

  <!-- 添加导入学生名单的链接 -->
  <h2>导入班级学生名单</h2>
  <p><a href="/checkin/import-student.html" style="text-decoration: none;">
    <button style="width: auto;">进入导入页面</button>
  </a></p>

  <!-- 教室列表显示区域 -->
  <div id="classroomList"></div>

  <h2>已导入的班级</h2>

  <!-- 隐藏的删除表单 -->
  <form id="delete-form" action="/checkin/manage/delete-class-students" method="post" style="display:none;">
    <input type="hidden" id="delete-class-name" name="class_name">
  </form>

  <!-- 自动加载班级列表 -->
  <iframe src="/checkin/manage/list-students" style="width:100%; border:none; min-height:200px;"></iframe>
</body>
</html>